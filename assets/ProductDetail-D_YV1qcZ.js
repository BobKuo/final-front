import{P as w,S as $,U as A,c as _,h as f,Q as E,J as N,az as P,aA as I,aB as T,Z as U,a1 as z,r as q,z as x,m,B as u,aC as D,a2 as L,aD as C,f as o,l as k,p as R,a8 as b,u as y,ag as j,q as l,F,A as J,av as M,af as G,a4 as O,a6 as S,a3 as W}from"./index-DpAByrkg.js";import{Q as Y,a as Z}from"./QCarousel-G_7-0sE7.js";import{Q as H}from"./QImg-DD83U7OR.js";import{Q as K}from"./QBadge-Z9WNXpQ_.js";import{Q as X}from"./QPage-CvXTXyK2.js";import{p as ee}from"./product-XXdLeG2z.js";import"./touch-BjYP5sR0.js";import"./selection-DXFbBLEk.js";import"./use-fullscreen-31DFj7QZ.js";const Q=w({name:"QBreadcrumbsEl",props:{...$,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(a,{slots:n}){const{linkTag:d,linkAttrs:p,linkClass:g,navigateOnClick:c}=A(),e=_(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(a.disable!==!0?"q-link--focusable"+g.value:"q-breadcrumbs__el--disable"),...p.value,onClick:c})),h=_(()=>"q-breadcrumbs__el-icon"+(a.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const i=[];return a.icon!==void 0&&i.push(f(E,{class:h.value,name:a.icon})),a.label!==void 0&&i.push(a.label),f(d.value,{...e.value},N(n.default,i))}}}),te=["",!0],ae=w({name:"QBreadcrumbs",props:{...P,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:a=>["none","xs","sm","md","lg","xl"].includes(a),default:"sm"}},setup(a,{slots:n}){const d=I(a),p=_(()=>`flex items-center ${d.value}${a.gutter==="none"?"":` q-gutter-${a.gutter}`}`),g=_(()=>a.separatorColor?` text-${a.separatorColor}`:""),c=_(()=>` text-${a.activeColor}`);return()=>{if(n.default===void 0)return;const e=T(U(n.default));if(e.length===0)return;let h=1;const i=[],s=e.filter(r=>r.type?.name==="QBreadcrumbsEl").length,t=n.separator!==void 0?n.separator:()=>a.separator;return e.forEach(r=>{if(r.type?.name==="QBreadcrumbsEl"){const v=h<s,B=r.props!==null&&te.includes(r.props.disable),V=(v===!0?"":" q-breadcrumbs--last")+(B!==!0&&v===!0?c.value:"");h++,i.push(f("div",{class:`flex items-center${V}`},[r])),v===!0&&i.push(f("div",{class:"q-breadcrumbs__separator"+g.value},t()))}else i.push(r)}),f("div",{class:"q-breadcrumbs"},[f("div",{class:p.value},i)])}}}),se={class:"row q-col-gutter-xl"},re={class:"col-12 col-md-6 flex flex-center"},le={class:"bg-grey-2 rounded-borders q-pa-sm",style:{width:"100%"}},oe={key:2,class:"text-caption text-grey text-center q-pa-lg"},ie={class:"col-12 col-md-6"},ne={class:"q-mb-md"},ue={class:"text-h5 text-primary text-weight-bold"},de={class:"text-subtitle2 text-grey-7 q-mb-xs"},ce={class:"text-h4 text-deep-orange-6 q-mb-md"},me={class:"text-body1 q-mt-md",style:{"white-space":"pre-line"}},pe={key:0,class:"absolute full-width bg-black text-white",style:{opacity:"0.7",top:"0",left:"0",height:"100%"}},ge={class:"flex flex-center column text-center",style:{height:"100%"}},Qe={__name:"ProductDetail",setup(a){const n=D(),d=L(),p=z(),g=q(0),c=q(1),e=q({name:"",price:0,description:"",category:"",sell:!0,images:[]});(async()=>{try{const{data:s}=await ee.getId(n.params.id);e.value.name=s.product.name,e.value.price=s.product.price,e.value.description=s.product.description,e.value.category=s.product.category,e.value.sell=s.product.sell,e.value.images=s.product.images,document.title=`${s.product.name} | JUDY WANG ART`}catch(s){console.error("Error fetching products:",s),d.notify({type:"negative",message:"無法載入商品資料"}),C.push("/")}})();const i=async()=>{if(!p.isLoggedIn){d.dialog({title:"需要登入",message:"請先登入帳號才能加入購物車"});return}try{const{data:s}=await W.cart({product:n.params.id,quantity:c.value});p.cartTotal=s.result,d.notify({type:"positive",message:"已加入購物車"})}catch(s){console.error("Error fetching products:",s),d.notify({type:"negative",message:"無法加入購物車"}),C.push("/")}};return(s,t)=>(m(),x(X,{class:"q-ma-xl"},{default:u(()=>[o(ae,{class:"q-mb-lg"},{default:u(()=>[o(Q,{icon:"home",to:"/"},{default:u(()=>t[2]||(t[2]=[b("首頁",-1)])),_:1,__:[2]}),o(Q,{icon:"list",to:"/shopping"},{default:u(()=>t[3]||(t[3]=[b("商品列表",-1)])),_:1,__:[3]}),o(Q,null,{default:u(()=>[b(y(e.value.name),1)]),_:1})]),_:1}),o(j,{flat:"",bordered:"",class:"q-pa-lg shadow-2",style:{width:"100%"}},{default:u(()=>[l("div",se,[l("div",re,[l("div",le,[e.value.images.length>1?(m(),x(Y,{key:0,arrows:!0,height:"350px",swipeable:"",class:"rounded-borders full-width",modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=r=>g.value=r),"control-type":"regular","control-color":"purple",animated:"","transition-prev":"jump-right","transition-next":"jump-left"},{default:u(()=>[(m(!0),k(F,null,J(e.value.images,(r,v)=>(m(),x(Z,{key:v,name:v,"img-src":r,style:{"background-size":"contain","background-position":"center","background-repeat":"no-repeat"}},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])):e.value.images.length===1?(m(),x(H,{key:1,src:e.value.images[0],height:"350px",fit:"contain",class:"rounded-borders"},null,8,["src"])):(m(),k("div",oe,"無商品圖片"))])]),l("div",ie,[l("div",ne,[l("div",ue,[b(y(e.value.name)+" ",1),o(K,{transparent:"",align:"middle",color:"orange"},{default:u(()=>t[4]||(t[4]=[b(" 數位檔案 ",-1)])),_:1,__:[4]})]),l("div",de,y(e.value.category),1),l("div",ce,"$"+y(e.value.price),1),o(M),l("div",me,y(e.value.description),1)]),o(G,{class:"justify-start q-gutter-md"},{default:u(()=>[o(O,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=r=>c.value=r),modelModifiers:{number:!0},type:"number","input-class":"text-center",min:1,outlined:"",square:""},null,8,["modelValue"]),o(S,{icon:"add_shopping_cart",color:"primary",label:"加入購物車",disabled:!e.value.sell,onClick:i},null,8,["disabled"])]),_:1})])])]),_:1}),e.value.sell?R("",!0):(m(),k("div",pe,[t[7]||(t[7]=b(" > ",-1)),l("div",ge,[t[5]||(t[5]=l("h1",{class:"text-h3 q-mb-md"},"已下架",-1)),t[6]||(t[6]=l("p",{class:"text-h5 q-mb-lg"},"這個商品已經下架，無法購買。",-1)),o(S,{color:"primary",to:"/shopping",label:"返回商品列表"})])]))]),_:1}))}};export{Qe as default};
