import{P as T,c as p,h as V,Z as O,ad as $,ae as E,a7 as F,af as D,J as N,r as k,w,o as H,ag as M,l as v,m as u,q as d,p as x,z as W,f as j,ah as R,B as q,u as S,F as Q,A as P,Q as G,ai as U,a3 as J}from"./index-BU53P19-.js";import{Q as L,a as Y}from"./QCarousel-CMrEbSNI.js";import{g as Z}from"./index-CH_iu5NA.js";import{S as K}from"./ScrollTrigger-C4gmGO9R.js";import{W as X}from"./WorkCard--UjA7361.js";import{s as ee}from"./series-BSPZwDX9.js";import{w as te}from"./work-Bv4MliSb.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./touch-BjYP5sR0.js";import"./selection-DeTOTXwY.js";import"./use-fullscreen-nJP8ZUjr.js";import"./QChip-DYv5hzmd.js";import"./position-engine-CZcZLFhG.js";const ae=T({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(o,{slots:n}){const m=p(()=>{const l=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(g=>o[g]===!0).map(g=>`q-btn-group--${g}`).join(" ");return`q-btn-group row no-wrap${l.length!==0?" "+l:""}`+(o.spread===!0?" q-btn-group--spread":" inline")});return()=>V("div",{class:m.value},O(n.default))}}),se=T({name:"QBtnToggle",props:{...$,modelValue:{required:!0},options:{type:Array,required:!0,validator:o=>o.every(n=>("label"in n||"icon"in n||"slot"in n)&&"value"in n)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(o,{slots:n,emit:m}){const l=p(()=>o.options.find(s=>s.value===o.modelValue)!==void 0),g=p(()=>({type:"hidden",name:o.name,value:o.modelValue})),h=D(g),r=p(()=>E(o)),C=p(()=>({rounded:o.rounded,dense:o.dense,...r.value})),y=p(()=>o.options.map((s,c)=>{const{attrs:B,value:e,slot:a,...t}=s;return{slot:a,props:{key:c,"aria-pressed":e===o.modelValue?"true":"false",...B,...t,...C.value,disable:o.disable===!0||t.disable===!0,color:e===o.modelValue?i(t,"toggleColor"):i(t,"color"),textColor:e===o.modelValue?i(t,"toggleTextColor"):i(t,"textColor"),noCaps:i(t,"noCaps")===!0,noWrap:i(t,"noWrap")===!0,size:i(t,"size"),padding:i(t,"padding"),ripple:i(t,"ripple"),stack:i(t,"stack")===!0,stretch:i(t,"stretch")===!0,onClick(f){_(e,s,f)}}}}));function _(s,c,B){o.readonly!==!0&&(o.modelValue===s?o.clearable===!0&&(m("update:modelValue",null,null),m("clear")):m("update:modelValue",s,c),m("click",B))}function i(s,c){return s[c]===void 0?o[c]:s[c]}function b(){const s=y.value.map(c=>V(F,c.props,c.slot!==void 0?n[c.slot]:void 0));return o.name!==void 0&&o.disable!==!0&&l.value===!0&&h(s,"push"),N(n.default,s)}return()=>V(ae,{class:"q-btn-toggle",...r.value,rounded:o.rounded,stretch:o.stretch,glossy:o.glossy,spread:o.spread},b)}}),ne={class:"projects-section"},le={class:"container"},re={class:"q-pa-md"},ie={key:0,class:"loading-container"},ce={class:"absolute-bottom custom-caption"},ue={class:"text-h2"},de={class:"text-subtitle1"},me={key:2,class:"row justify-center q-mt-md"},ge={key:0,class:"row justify-center"},ve={class:"col-12"},pe={class:"section-title"},he={key:0,class:"projects-grid col-12 col-md-10"},fe=["id"],ye={key:1,class:"no-works-container"},_e={class:"no-works-message"},Be={__name:"WorkPage",setup(o){Z.registerPlugin(K);const n=M(),m=J(),l=k([]),g=k([]),h=k(!0),r=k(""),C=p(()=>l.value.map(e=>({label:e.name,value:e._id}))),y=p(()=>l.value.find(e=>e._id===r.value)),_=p(()=>g.value.filter(e=>e.category===r.value)),i=e=>({id:e._id,title:e.name,category:y.value?.name||"未分類",description:e.content||"暫無描述",image:e.images?.[0]||"https://via.placeholder.com/600x400?text=No+Image",tags:e.tags||[],statistics:e.statistics||{}}),b=async()=>{const e=n.hash;if(e&&e.startsWith("#project-")){const a=e.replace("#project-",""),t=g.value.find(f=>f._id===a);t?(r.value=t.category,await U(),setTimeout(()=>{s(a,t)},300)):m.notify({type:"warning",message:"找不到指定的作品",position:"top",timeout:2e3,icon:"warning"})}},s=(e,a)=>{const t=document.getElementById(`project-${e}`);if(t){const f=t.getBoundingClientRect(),A=f.height,I=window.innerHeight,z=f.top+window.pageYOffset-50-I/2+A/2;window.scrollTo({top:Math.max(0,z),behavior:"smooth"}),m.notify({type:"info",message:`正在查看：${a.name}`,position:"top",timeout:3e3,icon:"visibility",actions:[{label:"關閉",color:"white",handler:()=>{}}]})}};w(()=>n.hash,(e,a)=>{e&&e!==a&&e.startsWith("#project-")&&b()}),w(r,(e,a)=>{e!==a&&e&&(console.log("切換到系列:",y.value?.name),console.log("該系列作品數量:",_.value.length))});const c=async()=>{try{h.value=!0;const e=await ee.get();l.value=e.data.series,l.value.length>0&&(r.value=l.value[0]._id)}catch(e){console.error("Error fetching series:",e)}finally{h.value=!1}},B=async()=>{try{h.value=!0;const e=await te.get();g.value=e.data.works}catch(e){console.error("Error fetching works:",e)}finally{h.value=!1}};return H(async()=>{await c(),await B(),n.hash&&n.hash.startsWith("#project-")?b():l.value.length>0&&(r.value=l.value[0]._id)}),(e,a)=>(u(),v("div",ne,[d("div",le,[d("div",re,[h.value?(u(),v("div",ie,[j(R,{size:"50px",color:"primary"}),a[2]||(a[2]=d("p",{class:"q-mt-md"},"載入中...",-1))])):(u(),W(L,{key:1,modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"rounded-borders"},{default:q(()=>[(u(!0),v(Q,null,P(l.value,t=>(u(),W(Y,{key:t._id,name:t._id,"img-src":t.cover},{default:q(()=>[d("div",ce,[d("div",ue,S(t.name),1),d("div",de,S(t.description),1)])]),_:2},1032,["name","img-src"]))),128))]),_:1},8,["modelValue"])),!h.value&&l.value.length>0?(u(),v("div",me,[j(se,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=t=>r.value=t),options:C.value,"toggle-color":"judy-2",color:"white","text-color":"judy-2",unelevated:""},null,8,["modelValue","options"])])):x("",!0)]),y.value?(u(),v("div",ge,[d("div",ve,[d("h2",pe,S(y.value.name)+" - 作品集",1)]),_.value.length>0?(u(),v("div",he,[(u(!0),v(Q,null,P(_.value,(t,f)=>(u(),v("div",{key:t._id,id:`project-${t._id}`,class:"project-section"},[j(X,{project:i(t),"is-reverse":f%2===1},null,8,["project","is-reverse"])],8,fe))),128))])):(u(),v("div",ye,[d("div",_e,[j(G,{name:"image",size:"4rem",color:"grey-5"}),a[3]||(a[3]=d("h3",null,"此系列暫無作品",-1)),a[4]||(a[4]=d("p",null,"請選擇其他系列查看作品",-1))])]))])):x("",!0)])]))}},ze=oe(Be,[["__scopeId","data-v-2083ec59"]]);export{ze as default};
