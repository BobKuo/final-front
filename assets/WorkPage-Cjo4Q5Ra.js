import{P as F,c as k,h as E,Z as ce,ad as _e,ae as ke,a7 as W,af as je,J as Se,ag as H,ah as Te,ai as Ce,aj as Be,g as xe,r as P,V as Pe,W as Ve,ak as $e,al as qe,am as Oe,w as I,H as X,an as ee,ao as te,ap as Ee,aq as Qe,M as We,a3 as ue,l as S,m as y,q as n,f as b,B as _,ar as Ie,F as A,A as L,z as N,a8 as Q,u as V,as as oe,x as Ae,at as Me,o as De,p as ae,au as He,Q as ze,av as ne,aw as Le}from"./index-b9Hiupso.js";import{Q as Ne,a as Re}from"./QCarousel-DTwy8LnT.js";import{g as R}from"./index-CH_iu5NA.js";import{S as Fe}from"./ScrollTrigger-C4gmGO9R.js";import{Q as Ue}from"./QChip-BDFLyTjI.js";import{v as Ge,a as se,u as Je,p as le,b as Ye,c as Ze,d as Ke,r as ie,s as Xe}from"./position-engine-CXC4ha2K.js";import{c as re}from"./selection-qoLiaPjU.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as et,w as tt}from"./work-BDOQVt8_.js";import"./touch-BjYP5sR0.js";import"./use-fullscreen-DpYg04Gn.js";const ot=F({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:i}){const f=k(()=>{const r=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(u=>e[u]===!0).map(u=>`q-btn-group--${u}`).join(" ");return`q-btn-group row no-wrap${r.length!==0?" "+r:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>E("div",{class:f.value},ce(i.default))}}),at=F({name:"QBtnToggle",props:{..._e,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(i=>("label"in i||"icon"in i||"slot"in i)&&"value"in i)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:i,emit:f}){const r=k(()=>e.options.find(a=>a.value===e.modelValue)!==void 0),u=k(()=>({type:"hidden",name:e.name,value:e.modelValue})),d=je(u),c=k(()=>ke(e)),h=k(()=>({rounded:e.rounded,dense:e.dense,...c.value})),v=k(()=>e.options.map((a,o)=>{const{attrs:m,value:w,slot:q,...t}=a;return{slot:q,props:{key:o,"aria-pressed":w===e.modelValue?"true":"false",...m,...t,...h.value,disable:e.disable===!0||t.disable===!0,color:w===e.modelValue?g(t,"toggleColor"):g(t,"color"),textColor:w===e.modelValue?g(t,"toggleTextColor"):g(t,"textColor"),noCaps:g(t,"noCaps")===!0,noWrap:g(t,"noWrap")===!0,size:g(t,"size"),padding:g(t,"padding"),ripple:g(t,"ripple"),stack:g(t,"stack")===!0,stretch:g(t,"stretch")===!0,onClick(s){j(w,a,s)}}}}));function j(a,o,m){e.readonly!==!0&&(e.modelValue===a?e.clearable===!0&&(f("update:modelValue",null,null),f("clear")):f("update:modelValue",a,o),f("click",m))}function g(a,o){return a[o]===void 0?e[o]:a[o]}function C(){const a=v.value.map(o=>E(W,o.props,o.slot!==void 0?i[o.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&r.value===!0&&d(a,"push"),Se(i.default,a)}return()=>E(ot,{class:"q-btn-toggle",...c.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},C)}}),z=F({name:"QTooltip",inheritAttrs:!1,props:{...Je,...Be,...H,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...H.transitionShow,default:"jump-down"},transitionHide:{...H.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:se},self:{type:String,default:"top middle",validator:se},offset:{type:Array,default:()=>[14,14],validator:Ge},scrollTarget:Ce,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Te],setup(e,{slots:i,emit:f,attrs:r}){let u,d;const c=xe(),{proxy:{$q:h}}=c,v=P(null),j=P(!1),g=k(()=>le(e.anchor,h.lang.rtl)),C=k(()=>le(e.self,h.lang.rtl)),a=k(()=>e.persistent!==!0),{registerTick:o,removeTick:m}=Pe(),{registerTimeout:w}=Ve(),{transitionProps:q,transitionStyle:t}=$e(e),{localScrollTarget:s,changeScrollEvent:l,unconfigureScrollTarget:$}=Ye(e,Z),{anchorEl:T,canShow:U,anchorEvents:B}=Ze({showing:j,configureAnchorEl:ye}),{show:ge,hide:M}=qe({showing:j,canShow:U,handleShow:he,handleHide:fe,hideOnRouteChange:a,processOnMount:!0});Object.assign(B,{delayShow:ve,delayHide:pe});const{showPortal:G,hidePortal:J,renderPortal:me}=Oe(c,v,we,"tooltip");if(h.platform.is.mobile===!0){const p={anchorEl:T,innerRef:v,onClickOutside(x){return M(x),x.target.classList.contains("q-dialog__backdrop")&&We(x),!0}},D=k(()=>e.modelValue===null&&e.persistent!==!0&&j.value===!0);I(D,x=>{(x===!0?Ke:ie)(p)}),X(()=>{ie(p)})}function he(p){G(),o(()=>{d=new MutationObserver(()=>O()),d.observe(v.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),O(),Z()}),u===void 0&&(u=I(()=>h.screen.width+"|"+h.screen.height+"|"+e.self+"|"+e.anchor+"|"+h.lang.rtl,O)),w(()=>{G(!0),f("show",p)},e.transitionDuration)}function fe(p){m(),J(),Y(),w(()=>{J(!0),f("hide",p)},e.transitionDuration)}function Y(){d!==void 0&&(d.disconnect(),d=void 0),u!==void 0&&(u(),u=void 0),$(),ee(B,"tooltipTemp")}function O(){Xe({targetEl:v.value,offset:e.offset,anchorEl:T.value,anchorOrigin:g.value,selfOrigin:C.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ve(p){if(h.platform.is.mobile===!0){re(),document.body.classList.add("non-selectable");const D=T.value,x=["touchmove","touchcancel","touchend","click"].map(K=>[D,K,"delayHide","passiveCapture"]);te(B,"tooltipTemp",x)}w(()=>{ge(p)},e.delay)}function pe(p){h.platform.is.mobile===!0&&(ee(B,"tooltipTemp"),re(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),w(()=>{M(p)},e.hideDelay)}function ye(){if(e.noParentEvent===!0||T.value===null)return;const p=h.platform.is.mobile===!0?[[T.value,"touchstart","delayShow","passive"]]:[[T.value,"mouseenter","delayShow","passive"],[T.value,"mouseleave","delayHide","passive"]];te(B,"anchor",p)}function Z(){if(T.value!==null||e.scrollTarget!==void 0){s.value=Ee(T.value,e.scrollTarget);const p=e.noParentEvent===!0?O:M;l(s.value,p)}}function be(){return j.value===!0?E("div",{...r,ref:v,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,t.value],role:"tooltip"},ce(i.default)):null}function we(){return E(Qe,q.value,be)}return X(Y),Object.assign(c.proxy,{updatePosition:O}),me}}),nt={class:"project-image"},st=["src","alt"],lt={class:"row full-width items-center"},it={class:"col"},rt={class:"row justify-end q-gutter-xs"},ct={class:"col-4"},ut={class:"row justify-end"},dt={class:"project-content"},gt={class:"project-category"},mt={class:"project-title"},ht={class:"project-description"},ft=["src","alt"],vt={__name:"WorkCard",props:{project:{type:Object,required:!0,validator:e=>e&&typeof e=="object"&&"id"in e&&"title"in e&&"category"in e&&"description"in e&&"image"in e},isReverse:{type:Boolean,default:!1}},setup(e){const i=ue(),f=e,r=P(!1),u=()=>{r.value=!0},d=()=>{r.value=!1},c=async()=>{const a=`${window.location.origin}${window.location.pathname}#/work#project-${f.project.id}`;try{h(a)}catch(o){o.name!=="AbortError"&&(console.error("分享失敗:",o),h(a))}},h=a=>{`${f.project.title}`,i.dialog({title:"分享作品",message:"選擇分享方式",options:{type:"radio",model:"copy",items:[{label:"複製連結",value:"copy",icon:"content_copy"},{label:"分享到 Facebook",value:"facebook",icon:"facebook"},{label:"分享到 LINE",value:"line",icon:"chat"}]},ok:"分享",cancel:"取消",persistent:!0}).onOk(o=>{j(o,a)})},v=async a=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(a),!0;throw new Error("複製功能不受支援")}catch(o){return console.error("複製失敗:",o),!1}},j=async(a,o)=>{switch(a){case"copy":{await v(o)?i.notify({type:"positive",message:"連結已複製到剪貼簿！",position:"top",timeout:2e3,icon:"content_copy"}):i.dialog({title:"手動複製連結",message:"請手動複製以下連結：",prompt:{model:o,type:"text",readonly:!0},ok:"關閉",persistent:!0});break}case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o)}`,"_blank","width=600,height=400,scrollbars=yes,resizable=yes"),i.notify({type:"info",message:"正在開啟 Facebook 分享...",position:"top",timeout:2e3,icon:"facebook"});break;case"line":window.open(`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(o)}`,"_blank","width=600,height=400,scrollbars=yes,resizable=yes"),i.notify({type:"info",message:"正在開啟 LINE 分享...",position:"top",timeout:2e3,icon:"chat"});break;default:i.notify({type:"negative",message:"未知的分享方式",position:"top",timeout:2e3})}},g=a=>{const m=a.currentTarget.querySelector(".project-content");R.to(m,{y:-10,duration:.3})},C=a=>{const m=a.currentTarget.querySelector(".project-content");R.to(m,{y:0,duration:.3})};return(a,o)=>(y(),S(A,null,[n("div",{class:Ae(["project-item bg-judy-1",{reverse:e.isReverse}]),onMouseenter:g,onMouseleave:C},[n("div",nt,[b(oe,{class:"my-card",flat:"",bordered:""},{default:_(()=>[n("img",{src:e.project.image,alt:e.project.title,class:"main-image",onClick:u},null,8,st),b(Ie,{align:e.isReverse?"left":"right"},{default:_(()=>[n("div",lt,[n("div",it,[n("div",rt,[(y(!0),S(A,null,L(e.project.tags,(m,w)=>(y(),N(Ue,{square:"",color:`judy-${2+w%5}`,"text-color":"white",icon:"tag",key:m},{default:_(()=>[Q(V(m),1)]),_:2},1032,["color"]))),128))])]),n("div",ct,[n("div",ut,[b(W,{flat:"",round:"",color:"red",icon:"favorite"},{default:_(()=>[b(z,null,{default:_(()=>o[1]||(o[1]=[Q("加入收藏",-1)])),_:1,__:[1]})]),_:1}),b(W,{flat:"",round:"",color:"teal",icon:"bookmark"},{default:_(()=>[b(z,null,{default:_(()=>o[2]||(o[2]=[Q("書籤",-1)])),_:1,__:[2]})]),_:1}),b(W,{flat:"",round:"",color:"primary",icon:"share",onClick:c},{default:_(()=>[b(z,null,{default:_(()=>o[3]||(o[3]=[Q("分享作品",-1)])),_:1,__:[3]})]),_:1})])])])]),_:1},8,["align"])]),_:1})]),n("div",dt,[n("div",gt,"－"+V(e.project.category),1),n("h3",mt,V(e.project.title),1),n("p",ht,V(e.project.description),1),n("button",{class:"project-link",onClick:u},o[4]||(o[4]=[n("span",null,"放大看作品",-1),n("svg",{class:"arrow-icon",viewBox:"0 0 24 24"},[n("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1)]))])],34),b(Me,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=m=>r.value=m),maximized:"","transition-show":"none","transition-hide":"none"},{default:_(()=>[b(oe,{class:"image-dialog-card bg-black"},{default:_(()=>[n("div",{class:"image-container",onClick:d},[n("img",{src:e.project.image,alt:e.project.title,class:"fullsize-image",onClick:d},null,8,ft)])]),_:1})]),_:1},8,["modelValue"])],64))}},pt=de(vt,[["__scopeId","data-v-920070e0"]]),yt={class:"projects-section"},bt={class:"container"},wt={class:"q-pa-md"},_t={key:0,class:"loading-container"},kt={class:"absolute-bottom custom-caption"},jt={class:"text-h2"},St={class:"text-subtitle1"},Tt={key:2,class:"row justify-center q-mt-md"},Ct={key:0,class:"row justify-center"},Bt={class:"col-12"},xt={class:"section-title"},Pt={key:0,class:"projects-grid col-12 col-md-10"},Vt=["id"],$t={key:1,class:"no-works-container"},qt={class:"no-works-message"},Ot={__name:"WorkPage",setup(e){R.registerPlugin(Fe);const i=Le(),f=ue(),r=P([]),u=P([]),d=P(!0),c=P(""),h=k(()=>r.value.map(t=>({label:t.name,value:t._id}))),v=k(()=>r.value.find(t=>t._id===c.value)),j=k(()=>u.value.filter(t=>t.category===c.value)),g=t=>({id:t._id,title:t.name,category:v.value?.name||"未分類",description:t.content||"暫無描述",image:t.images?.[0]||"https://via.placeholder.com/600x400?text=No+Image",tags:t.tags||[]}),C=async()=>{await ne();const t=i.hash;if(t&&t.startsWith("#project-")){const s=t.replace("#project-",""),l=u.value.find($=>$._id===s);l?c.value!==l.category?(c.value=l.category,await ne(),setTimeout(()=>{a(s,l)},500)):setTimeout(()=>{a(s,l)},300):f.notify({type:"warning",message:"找不到指定的作品",position:"top",timeout:2e3,icon:"warning"})}},a=(t,s)=>{const l=document.getElementById(`project-${t}`);if(l){const B=l.getBoundingClientRect().top+window.pageYOffset-100-400;window.scrollTo({top:Math.max(0,B),behavior:"smooth"}),o(l),f.notify({type:"info",message:`正在查看：${s.name}`,position:"top",timeout:3e3,icon:"visibility",actions:[{label:"關閉",color:"white",handler:()=>{}}]})}},o=t=>{t.classList.add("highlighted"),setTimeout(()=>{t.classList.remove("highlighted")},3e3)};I(()=>i.hash,(t,s)=>{t&&t!==s&&t.startsWith("#project-")&&C()}),I(c,(t,s)=>{t!==s&&t&&(console.log("切換到系列:",v.value?.name),console.log("該系列作品數量:",j.value.length))});const m=async()=>{try{d.value=!0;const t=await et.get();r.value=t.data.series,r.value.length>0&&(c.value=r.value[0]._id)}catch(t){console.error("Error fetching series:",t)}finally{d.value=!1}},w=async()=>{try{d.value=!0;const t=await tt.get();u.value=t.data.works}catch(t){console.error("Error fetching works:",t)}finally{d.value=!1}};De(async()=>{await m(),await w(),setTimeout(()=>{C()},1e3)});const q=t=>{console.log("View project:",t)};return(t,s)=>(y(),S("div",yt,[n("div",bt,[n("div",wt,[d.value?(y(),S("div",_t,[b(He,{size:"50px",color:"primary"}),s[2]||(s[2]=n("p",{class:"q-mt-md"},"載入中...",-1))])):(y(),N(Ne,{key:1,modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=l=>c.value=l),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"rounded-borders"},{default:_(()=>[(y(!0),S(A,null,L(r.value,l=>(y(),N(Re,{key:l._id,name:l._id,"img-src":l.cover},{default:_(()=>[n("div",kt,[n("div",jt,V(l.name),1),n("div",St,V(l.description),1)])]),_:2},1032,["name","img-src"]))),128))]),_:1},8,["modelValue"])),!d.value&&r.value.length>0?(y(),S("div",Tt,[b(at,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=l=>c.value=l),options:h.value,"toggle-color":"primary",color:"white","text-color":"primary",unelevated:""},null,8,["modelValue","options"])])):ae("",!0)]),v.value?(y(),S("div",Ct,[n("div",Bt,[n("h2",xt,V(v.value.name)+" - 作品集",1)]),j.value.length>0?(y(),S("div",Pt,[(y(!0),S(A,null,L(j.value,(l,$)=>(y(),S("div",{key:l._id,id:`project-${l._id}`,class:"project-section"},[b(pt,{project:g(l),"is-reverse":$%2===1,onViewProject:q},null,8,["project","is-reverse"])],8,Vt))),128))])):(y(),S("div",$t,[n("div",qt,[b(ze,{name:"image",size:"4rem",color:"grey-5"}),s[3]||(s[3]=n("h3",null,"此系列暫無作品",-1)),s[4]||(s[4]=n("p",null,"請選擇其他系列查看作品",-1))])]))])):ae("",!0)])]))}},Rt=de(Ot,[["__scopeId","data-v-7ae6e824"]]);export{Rt as default};
