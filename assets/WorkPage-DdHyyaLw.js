import{P as U,c as _,h as q,Z as re,ad as we,ae as _e,a7 as E,af as ke,J as je,ag as H,ah as Se,ai as Ce,aj as Be,g as Te,r as P,V as xe,W as Pe,ak as $e,al as Ve,am as qe,w as W,H as X,an as ee,ao as te,ap as Oe,aq as Ee,M as We,a3 as ce,a2 as Qe,l as S,m as y,q as n,f as b,B as w,ar as Ie,F as Q,A as R,z as L,a8 as O,u as $,as as oe,x as Ae,at as Me,a4 as De,o as He,au as ze,p as ae,av as Re,Q as Le,aw as Ne}from"./index-BCONoMDS.js";import{Q as Ue,a as Fe}from"./QCarousel-CnLQ_hy4.js";import{g as N}from"./index-CH_iu5NA.js";import{S as Ge}from"./ScrollTrigger-C4gmGO9R.js";import{Q as Je}from"./QChip-HsQE_6SY.js";import{v as Ye,a as ne,u as Ze,p as se,b as Ke,c as Xe,d as et,r as ie,s as tt}from"./position-engine-CfQ6XI6H.js";import{c as le}from"./selection-BAHgOH3-.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as ot,w as at}from"./work-CUVBSFb5.js";import"./touch-BjYP5sR0.js";import"./use-fullscreen-D0YXBYpO.js";const nt=U({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:s}){const h=_(()=>{const l=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>e[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${l.length!==0?" "+l:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>q("div",{class:h.value},re(s.default))}}),st=U({name:"QBtnToggle",props:{...we,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(s=>("label"in s||"icon"in s||"slot"in s)&&"value"in s)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:s,emit:h}){const l=_(()=>e.options.find(u=>u.value===e.modelValue)!==void 0),r=_(()=>({type:"hidden",name:e.name,value:e.modelValue})),d=ke(r),c=_(()=>_e(e)),f=_(()=>({rounded:e.rounded,dense:e.dense,...c.value})),v=_(()=>e.options.map((u,m)=>{const{attrs:i,value:t,slot:a,...o}=u;return{slot:a,props:{key:m,"aria-pressed":t===e.modelValue?"true":"false",...i,...o,...f.value,disable:e.disable===!0||o.disable===!0,color:t===e.modelValue?g(o,"toggleColor"):g(o,"color"),textColor:t===e.modelValue?g(o,"toggleTextColor"):g(o,"textColor"),noCaps:g(o,"noCaps")===!0,noWrap:g(o,"noWrap")===!0,size:g(o,"size"),padding:g(o,"padding"),ripple:g(o,"ripple"),stack:g(o,"stack")===!0,stretch:g(o,"stretch")===!0,onClick(j){k(t,u,j)}}}}));function k(u,m,i){e.readonly!==!0&&(e.modelValue===u?e.clearable===!0&&(h("update:modelValue",null,null),h("clear")):h("update:modelValue",u,m),h("click",i))}function g(u,m){return u[m]===void 0?e[m]:u[m]}function B(){const u=v.value.map(m=>q(E,m.props,m.slot!==void 0?s[m.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&l.value===!0&&d(u,"push"),je(s.default,u)}return()=>q(nt,{class:"q-btn-toggle",...c.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},B)}}),z=U({name:"QTooltip",inheritAttrs:!1,props:{...Ze,...Be,...H,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...H.transitionShow,default:"jump-down"},transitionHide:{...H.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ne},self:{type:String,default:"top middle",validator:ne},offset:{type:Array,default:()=>[14,14],validator:Ye},scrollTarget:Ce,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Se],setup(e,{slots:s,emit:h,attrs:l}){let r,d;const c=Te(),{proxy:{$q:f}}=c,v=P(null),k=P(!1),g=_(()=>se(e.anchor,f.lang.rtl)),B=_(()=>se(e.self,f.lang.rtl)),u=_(()=>e.persistent!==!0),{registerTick:m,removeTick:i}=xe(),{registerTimeout:t}=Pe(),{transitionProps:a,transitionStyle:o}=$e(e),{localScrollTarget:j,changeScrollEvent:I,unconfigureScrollTarget:A}=Ke(e,Z),{anchorEl:C,canShow:F,anchorEvents:T}=Xe({showing:k,configureAnchorEl:pe}),{show:de,hide:M}=Ve({showing:k,canShow:F,handleShow:me,handleHide:fe,hideOnRouteChange:u,processOnMount:!0});Object.assign(T,{delayShow:ve,delayHide:he});const{showPortal:G,hidePortal:J,renderPortal:ge}=qe(c,v,be,"tooltip");if(f.platform.is.mobile===!0){const p={anchorEl:C,innerRef:v,onClickOutside(x){return M(x),x.target.classList.contains("q-dialog__backdrop")&&We(x),!0}},D=_(()=>e.modelValue===null&&e.persistent!==!0&&k.value===!0);W(D,x=>{(x===!0?et:ie)(p)}),X(()=>{ie(p)})}function me(p){G(),m(()=>{d=new MutationObserver(()=>V()),d.observe(v.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),V(),Z()}),r===void 0&&(r=W(()=>f.screen.width+"|"+f.screen.height+"|"+e.self+"|"+e.anchor+"|"+f.lang.rtl,V)),t(()=>{G(!0),h("show",p)},e.transitionDuration)}function fe(p){i(),J(),Y(),t(()=>{J(!0),h("hide",p)},e.transitionDuration)}function Y(){d!==void 0&&(d.disconnect(),d=void 0),r!==void 0&&(r(),r=void 0),A(),ee(T,"tooltipTemp")}function V(){tt({targetEl:v.value,offset:e.offset,anchorEl:C.value,anchorOrigin:g.value,selfOrigin:B.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ve(p){if(f.platform.is.mobile===!0){le(),document.body.classList.add("non-selectable");const D=C.value,x=["touchmove","touchcancel","touchend","click"].map(K=>[D,K,"delayHide","passiveCapture"]);te(T,"tooltipTemp",x)}t(()=>{de(p)},e.delay)}function he(p){f.platform.is.mobile===!0&&(ee(T,"tooltipTemp"),le(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),t(()=>{M(p)},e.hideDelay)}function pe(){if(e.noParentEvent===!0||C.value===null)return;const p=f.platform.is.mobile===!0?[[C.value,"touchstart","delayShow","passive"]]:[[C.value,"mouseenter","delayShow","passive"],[C.value,"mouseleave","delayHide","passive"]];te(T,"anchor",p)}function Z(){if(C.value!==null||e.scrollTarget!==void 0){j.value=Oe(C.value,e.scrollTarget);const p=e.noParentEvent===!0?V:M;I(j.value,p)}}function ye(){return k.value===!0?q("div",{...l,ref:v,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",l.class],style:[l.style,o.value],role:"tooltip"},re(s.default)):null}function be(){return q(Ee,a.value,ye)}return X(Y),Object.assign(c.proxy,{updatePosition:V}),ge}}),it={class:"project-image"},lt=["src","alt"],rt={class:"row full-width items-center"},ct={class:"col"},ut={class:"row justify-end q-gutter-xs"},dt={class:"col-4"},gt={class:"row justify-end"},mt={class:"project-content"},ft={class:"project-category"},vt={class:"project-title"},ht={class:"project-description"},pt=["src","alt"],yt={__name:"WorkCard",props:{project:{type:Object,required:!0,validator:e=>e&&typeof e=="object"&&"id"in e&&"title"in e&&"category"in e&&"description"in e&&"image"in e},isReverse:{type:Boolean,default:!1}},setup(e){const s=ce(),h=Qe(),l=e,r=P(!1),d=()=>{r.value=!0},c=()=>{r.value=!1},f=async()=>{const i=`${window.location.origin}${window.location.pathname}#/work#project-${l.project.id}`;try{v(i)}catch(t){t.name!=="AbortError"&&(console.error("分享失敗:",t),v(i))}},v=i=>{g("copy",i)},k=async i=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(i),!0;throw new Error("複製功能不受支援")}catch(t){return console.error("複製失敗:",t),!1}},g=async(i,t)=>{switch(i){case"copy":{await k(t)?s.notify({type:"positive",message:"連結已複製到剪貼簿！",position:"top",timeout:2e3,icon:"content_copy"}):s.dialog({title:"手動複製連結",message:"請手動複製以下連結：",prompt:{model:t,type:"text",readonly:!0},ok:"關閉",persistent:!0});break}case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,"_blank","width=600,height=400,scrollbars=yes,resizable=yes"),s.notify({type:"info",message:"正在開啟 Facebook 分享...",position:"top",timeout:2e3,icon:"facebook"});break;case"line":window.open(`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(t)}`,"_blank","width=600,height=400,scrollbars=yes,resizable=yes"),s.notify({type:"info",message:"正在開啟 LINE 分享...",position:"top",timeout:2e3,icon:"chat"});break;default:s.notify({type:"negative",message:"未知的分享方式",position:"top",timeout:2e3})}},B=i=>{const a=i.currentTarget.querySelector(".project-content");N.to(a,{y:-10,duration:.3})},u=i=>{const a=i.currentTarget.querySelector(".project-content");N.to(a,{y:0,duration:.3})},m=async()=>{if(!h.isLoggedIn){s.dialog({title:"需要登入",message:"請先登入帳號才能加入收藏"});return}try{await De.favorites({work:l.project.id}),s.notify({type:"positive",message:"已加入收藏"})}catch(i){console.error("Error fetching products:",i),s.notify({type:"negative",message:"無法加入收藏，請稍後再試"})}};return(i,t)=>(y(),S(Q,null,[n("div",{class:Ae(["project-item bg-judy-1",{reverse:e.isReverse}]),onMouseenter:B,onMouseleave:u},[n("div",it,[b(oe,{class:"my-card",flat:"",bordered:""},{default:w(()=>[n("img",{src:e.project.image,alt:e.project.title,class:"main-image",onClick:d},null,8,lt),b(Ie,{align:e.isReverse?"left":"right"},{default:w(()=>[n("div",rt,[n("div",ct,[n("div",ut,[(y(!0),S(Q,null,R(e.project.tags,(a,o)=>(y(),L(Je,{square:"",color:`judy-${2+o%5}`,"text-color":"white",icon:"tag",key:a},{default:w(()=>[O($(a),1)]),_:2},1032,["color"]))),128))])]),n("div",dt,[n("div",gt,[b(E,{flat:"",round:"",color:"red",icon:"favorite",onClick:m},{default:w(()=>[b(z,null,{default:w(()=>t[1]||(t[1]=[O("加入收藏",-1)])),_:1,__:[1]})]),_:1}),b(E,{flat:"",round:"",color:"teal",icon:"bookmark"},{default:w(()=>[b(z,null,{default:w(()=>t[2]||(t[2]=[O("書籤",-1)])),_:1,__:[2]})]),_:1}),b(E,{flat:"",round:"",color:"primary",icon:"share",onClick:f},{default:w(()=>[b(z,null,{default:w(()=>t[3]||(t[3]=[O("分享作品",-1)])),_:1,__:[3]})]),_:1})])])])]),_:1},8,["align"])]),_:1})]),n("div",mt,[n("div",ft,"－"+$(e.project.category),1),n("h3",vt,$(e.project.title),1),n("p",ht,$(e.project.description),1),n("button",{class:"project-link",onClick:d},t[4]||(t[4]=[n("span",null,"放大看作品",-1),n("svg",{class:"arrow-icon",viewBox:"0 0 24 24"},[n("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1)]))])],34),b(Me,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),maximized:"","transition-show":"none","transition-hide":"none"},{default:w(()=>[b(oe,{class:"image-dialog-card bg-black"},{default:w(()=>[n("div",{class:"image-container",onClick:c},[n("img",{src:e.project.image,alt:e.project.title,class:"fullsize-image",onClick:c},null,8,pt)])]),_:1})]),_:1},8,["modelValue"])],64))}},bt=ue(yt,[["__scopeId","data-v-17e6016d"]]),wt={class:"projects-section"},_t={class:"container"},kt={class:"q-pa-md"},jt={key:0,class:"loading-container"},St={class:"absolute-bottom custom-caption"},Ct={class:"text-h2"},Bt={class:"text-subtitle1"},Tt={key:2,class:"row justify-center q-mt-md"},xt={key:0,class:"row justify-center"},Pt={class:"col-12"},$t={class:"section-title"},Vt={key:0,class:"projects-grid col-12 col-md-10"},qt=["id"],Ot={key:1,class:"no-works-container"},Et={class:"no-works-message"},Wt={__name:"WorkPage",setup(e){N.registerPlugin(Ge);const s=ze(),h=ce(),l=P([]),r=P([]),d=P(!0),c=P(""),f=_(()=>l.value.map(t=>({label:t.name,value:t._id}))),v=_(()=>l.value.find(t=>t._id===c.value)),k=_(()=>r.value.filter(t=>t.category===c.value)),g=t=>({id:t._id,title:t.name,category:v.value?.name||"未分類",description:t.content||"暫無描述",image:t.images?.[0]||"https://via.placeholder.com/600x400?text=No+Image",tags:t.tags||[],statistics:t.statistics||{}}),B=async()=>{const t=s.hash;if(t&&t.startsWith("#project-")){const a=t.replace("#project-",""),o=r.value.find(j=>j._id===a);o?(c.value=o.category,await Ne(),setTimeout(()=>{u(a,o)},300)):h.notify({type:"warning",message:"找不到指定的作品",position:"top",timeout:2e3,icon:"warning"})}},u=(t,a)=>{const o=document.getElementById(`project-${t}`);if(o){const j=o.getBoundingClientRect(),I=j.height,A=window.innerHeight,T=j.top+window.pageYOffset-50-A/2+I/2;window.scrollTo({top:Math.max(0,T),behavior:"smooth"}),h.notify({type:"info",message:`正在查看：${a.name}`,position:"top",timeout:3e3,icon:"visibility",actions:[{label:"關閉",color:"white",handler:()=>{}}]})}};W(()=>s.hash,(t,a)=>{t&&t!==a&&t.startsWith("#project-")&&B()}),W(c,(t,a)=>{t!==a&&t&&(console.log("切換到系列:",v.value?.name),console.log("該系列作品數量:",k.value.length))});const m=async()=>{try{d.value=!0;const t=await ot.get();l.value=t.data.series,l.value.length>0&&(c.value=l.value[0]._id)}catch(t){console.error("Error fetching series:",t)}finally{d.value=!1}},i=async()=>{try{d.value=!0;const t=await at.get();r.value=t.data.works}catch(t){console.error("Error fetching works:",t)}finally{d.value=!1}};return He(async()=>{await m(),await i(),s.hash&&s.hash.startsWith("#project-")?B():l.value.length>0&&(c.value=l.value[0]._id)}),(t,a)=>(y(),S("div",wt,[n("div",_t,[n("div",kt,[d.value?(y(),S("div",jt,[b(Re,{size:"50px",color:"primary"}),a[2]||(a[2]=n("p",{class:"q-mt-md"},"載入中...",-1))])):(y(),L(Ue,{key:1,modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=o=>c.value=o),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"rounded-borders"},{default:w(()=>[(y(!0),S(Q,null,R(l.value,o=>(y(),L(Fe,{key:o._id,name:o._id,"img-src":o.cover},{default:w(()=>[n("div",St,[n("div",Ct,$(o.name),1),n("div",Bt,$(o.description),1)])]),_:2},1032,["name","img-src"]))),128))]),_:1},8,["modelValue"])),!d.value&&l.value.length>0?(y(),S("div",Tt,[b(st,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=o=>c.value=o),options:f.value,"toggle-color":"primary",color:"white","text-color":"primary",unelevated:""},null,8,["modelValue","options"])])):ae("",!0)]),v.value?(y(),S("div",xt,[n("div",Pt,[n("h2",$t,$(v.value.name)+" - 作品集",1)]),k.value.length>0?(y(),S("div",Vt,[(y(!0),S(Q,null,R(k.value,(o,j)=>(y(),S("div",{key:o._id,id:`project-${o._id}`,class:"project-section"},[b(bt,{project:g(o),"is-reverse":j%2===1},null,8,["project","is-reverse"])],8,qt))),128))])):(y(),S("div",Ot,[n("div",Et,[b(Le,{name:"image",size:"4rem",color:"grey-5"}),a[3]||(a[3]=n("h3",null,"此系列暫無作品",-1)),a[4]||(a[4]=n("p",null,"請選擇其他系列查看作品",-1))])]))])):ae("",!0)])]))}},Ft=ue(Wt,[["__scopeId","data-v-29a213fc"]]);export{Ft as default};
