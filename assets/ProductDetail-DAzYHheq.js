import{P as w,S as $,U as A,c as _,h as b,Q as E,J as N,aw as P,ax as T,ay as U,Z as z,a2 as I,r as q,z as x,m,B as u,az as R,a3 as j,aA as C,f as o,l as k,p as D,a9 as v,u as h,au as L,q as l,F,A as J,as as M,at as G,a5 as O,a7 as S,a4 as W}from"./index-D1ygRcZh.js";import{Q as Y,a as Z}from"./QCarousel-COywyrPl.js";import{Q as H}from"./QImg-DwNgSzg-.js";import{Q as K}from"./QBadge-DUZrlC0E.js";import{Q as X}from"./QPage-D085TDxR.js";import{p as ee}from"./product-BgKl9zfA.js";import"./touch-BjYP5sR0.js";import"./selection-B1a98VF1.js";import"./use-fullscreen-CML9RU_w.js";const Q=w({name:"QBreadcrumbsEl",props:{...$,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(a,{slots:n}){const{linkTag:d,linkAttrs:f,linkClass:p,navigateOnClick:c}=A(),e=_(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(a.disable!==!0?"q-link--focusable"+p.value:"q-breadcrumbs__el--disable"),...f.value,onClick:c})),y=_(()=>"q-breadcrumbs__el-icon"+(a.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const i=[];return a.icon!==void 0&&i.push(b(E,{class:y.value,name:a.icon})),a.label!==void 0&&i.push(a.label),b(d.value,{...e.value},N(n.default,i))}}}),te=["",!0],ae=w({name:"QBreadcrumbs",props:{...P,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:a=>["none","xs","sm","md","lg","xl"].includes(a),default:"sm"}},setup(a,{slots:n}){const d=T(a),f=_(()=>`flex items-center ${d.value}${a.gutter==="none"?"":` q-gutter-${a.gutter}`}`),p=_(()=>a.separatorColor?` text-${a.separatorColor}`:""),c=_(()=>` text-${a.activeColor}`);return()=>{if(n.default===void 0)return;const e=U(z(n.default));if(e.length===0)return;let y=1;const i=[],s=e.filter(r=>r.type?.name==="QBreadcrumbsEl").length,t=n.separator!==void 0?n.separator:()=>a.separator;return e.forEach(r=>{if(r.type?.name==="QBreadcrumbsEl"){const g=y<s,B=r.props!==null&&te.includes(r.props.disable),V=(g===!0?"":" q-breadcrumbs--last")+(B!==!0&&g===!0?c.value:"");y++,i.push(b("div",{class:`flex items-center${V}`},[r])),g===!0&&i.push(b("div",{class:"q-breadcrumbs__separator"+p.value},t()))}else i.push(r)}),b("div",{class:"q-breadcrumbs"},[b("div",{class:f.value},i)])}}}),se={class:"row q-col-gutter-xl"},re={class:"col-12 col-md-6 flex flex-center"},le={class:"bg-grey-2 rounded-borders q-pa-sm",style:{width:"100%"}},oe={key:2,class:"text-caption text-grey text-center q-pa-lg"},ie={class:"col-12 col-md-6"},ne={class:"q-mb-md"},ue={class:"text-h5 text-primary text-weight-bold"},de={class:"text-subtitle2 text-grey-7 q-mb-xs"},ce={class:"text-h4 text-deep-orange-6 q-mb-md"},me={class:"text-body1 q-mt-md",style:{"white-space":"pre-line"}},pe={key:0,class:"absolute full-width bg-black text-white",style:{opacity:"0.7",top:"0",left:"0",height:"100%"}},ge={class:"flex flex-center column text-center",style:{height:"100%"}},Qe={__name:"ProductDetail",setup(a){const n=R(),d=j(),f=I(),p=q(0),c=q(1),e=q({name:"",price:0,description:"",category:"",sell:!0,images:[]});(async()=>{try{const{data:s}=await ee.getId(n.params.id);e.value.name=s.product.name,e.value.price=s.product.price,e.value.description=s.product.description,e.value.category=s.product.category,e.value.sell=s.product.sell,e.value.images=s.product.images,document.title=`${s.product.name} | JUDY WANG ART`}catch(s){console.error("Error fetching products:",s),d.notify({type:"negative",message:"無法載入商品資料"}),C.push("/")}})();const i=async()=>{try{const{data:s}=await W.cart({product:n.params.id,quantity:c.value});f.cartTotal=s.result,d.notify({type:"positive",message:"已加入購物車"})}catch(s){console.error("Error fetching products:",s),d.notify({type:"negative",message:"無法加入購物車"}),C.push("/")}};return(s,t)=>(m(),x(X,{class:"q-ma-xl"},{default:u(()=>[o(ae,{class:"q-mb-lg"},{default:u(()=>[o(Q,{icon:"home",to:"/"},{default:u(()=>t[2]||(t[2]=[v("首頁",-1)])),_:1,__:[2]}),o(Q,{icon:"list",to:"/shopping"},{default:u(()=>t[3]||(t[3]=[v("商品列表",-1)])),_:1,__:[3]}),o(Q,null,{default:u(()=>[v(h(e.value.name),1)]),_:1})]),_:1}),o(L,{flat:"",bordered:"",class:"q-pa-lg shadow-2",style:{width:"100%"}},{default:u(()=>[l("div",se,[l("div",re,[l("div",le,[e.value.images.length>1?(m(),x(Y,{key:0,arrows:!0,height:"350px",swipeable:"",class:"rounded-borders full-width",modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=r=>p.value=r),"control-type":"regular","control-color":"purple",animated:"","transition-prev":"jump-right","transition-next":"jump-left"},{default:u(()=>[(m(!0),k(F,null,J(e.value.images,(r,g)=>(m(),x(Z,{key:g,name:g,"img-src":r,style:{"background-size":"contain","background-position":"center","background-repeat":"no-repeat"}},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue"])):e.value.images.length===1?(m(),x(H,{key:1,src:e.value.images[0],height:"350px",fit:"contain",class:"rounded-borders"},null,8,["src"])):(m(),k("div",oe,"無商品圖片"))])]),l("div",ie,[l("div",ne,[l("div",ue,[v(h(e.value.name)+" ",1),o(K,{transparent:"",align:"middle",color:"orange"},{default:u(()=>t[4]||(t[4]=[v(" 數位檔案 ",-1)])),_:1,__:[4]})]),l("div",de,h(e.value.category),1),l("div",ce,"$"+h(e.value.price),1),o(M),l("div",me,h(e.value.description),1)]),o(G,{class:"justify-start q-gutter-md"},{default:u(()=>[o(O,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=r=>c.value=r),modelModifiers:{number:!0},type:"number","input-class":"text-center",min:1,outlined:"",square:""},null,8,["modelValue"]),o(S,{icon:"add_shopping_cart",color:"primary",label:"加入購物車",disabled:!e.value.sell,onClick:i},null,8,["disabled"])]),_:1})])])]),_:1}),e.value.sell?D("",!0):(m(),k("div",pe,[t[7]||(t[7]=v(" > ",-1)),l("div",ge,[t[5]||(t[5]=l("h1",{class:"text-h3 q-mb-md"},"已下架",-1)),t[6]||(t[6]=l("p",{class:"text-h5 q-mb-lg"},"這個商品已經下架，無法購買。",-1)),o(S,{color:"primary",to:"/shopping",label:"返回商品列表"})])]))]),_:1}))}};export{Qe as default};
